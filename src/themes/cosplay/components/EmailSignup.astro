---
import { Button } from './ui/Button';
import { Mail, Star, Sparkles } from 'lucide-react';

interface Props {
  title: string;
  description: string;
  backgroundImage: string;
  formAction: string;
  buttonText: string;
}

const { title, description, backgroundImage, formAction, buttonText } = Astro.props;
---

<section 
  class="relative py-32 px-4 md:px-8 overflow-hidden"
  style={`background-image: url(${backgroundImage}); background-size: cover; background-position: center;`}
>
  <!-- Layered background effects -->
  <div class="absolute inset-0 bg-gradient-to-r from-purple-900/90 via-pink-800/85 to-purple-900/90 backdrop-blur-sm"></div>
  <div class="absolute inset-0">
    <!-- Animated sparkles pattern -->
    <div class="absolute inset-0 bg-[url('/sparkles-pattern.svg')] opacity-20 animate-twinkle"></div>
    <!-- Geometric anime-inspired pattern -->
    <div class="absolute inset-0 bg-[url('/anime-pattern.svg')] opacity-10 animate-float"></div>
  </div>

  <div class="relative max-w-4xl mx-auto text-center text-white">
    <!-- Decorative top element -->
    <div class="mb-8">
      <span 
        class="inline-flex items-center gap-2 px-6 py-2 rounded-full text-sm font-medium bg-white/10 backdrop-blur-md border border-white/20 animate-float"
      >
        <Sparkles class="w-4 h-4 text-pink-300" />
        Join Our Cosplay Community
        <Star class="w-4 h-4 text-pink-300" />
      </span>
    </div>

    <!-- Title with gradient text -->
    <h2 class="text-4xl md:text-5xl font-bold mb-6 leading-tight">
      <span class="bg-gradient-to-r from-pink-300 via-purple-300 to-blue-300 bg-clip-text text-transparent">
        {title}
      </span>
    </h2>

    <!-- Description with enhanced visibility -->
    <p class="text-lg md:text-xl mb-10 text-gray-200 max-w-2xl mx-auto leading-relaxed">
      {description}
    </p>
    
    <!-- Signup Form -->
    <form 
      action={formAction}
      method="POST"
      class="flex flex-col md:flex-row gap-4 justify-center items-center max-w-2xl mx-auto"
    >
      <div class="relative w-full md:w-auto flex-1">
        <!-- Email input with enhanced styling -->
        <div class="absolute left-3 top-1/2 transform -translate-y-1/2 text-pink-300">
          <Mail class="w-5 h-5" />
        </div>
        <input
          type="email"
          placeholder="Enter your email for exclusive cosplay updates"
          required
          class="w-full pl-10 pr-4 py-4 rounded-lg bg-white/10 backdrop-blur-md border border-white/20 text-white placeholder:text-gray-300 focus:outline-none focus:ring-2 focus:ring-pink-500/50 transition-all duration-300 hover:bg-white/15"
        />
        
        <!-- Decorative glow effect -->
        <div class="absolute inset-0 -z-10 bg-gradient-to-r from-pink-500 to-purple-500 opacity-20 blur-xl"></div>
      </div>

      <!-- Submit Button -->
      <Button 
        type="submit" 
        size="lg" 
        class="w-full md:w-auto bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-400 hover:to-purple-400 text-white font-semibold py-4 px-8 rounded-lg transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg hover:shadow-pink-500/25"
      >
        {buttonText}
      </Button>
    </form>

    <!-- Bottom text -->
    <p class="mt-6 text-sm text-gray-300 flex items-center justify-center gap-2">
      <Star class="w-4 h-4 text-pink-300" />
      Join our growing community of cosplay enthusiasts
      <Star class="w-4 h-4 text-pink-300" />
    </p>

    <!-- Decorative corner elements -->
    <div class="absolute top-0 left-0 w-32 h-32 bg-gradient-to-br from-pink-500/20 to-transparent blur-2xl"></div>
    <div class="absolute bottom-0 right-0 w-32 h-32 bg-gradient-to-tl from-purple-500/20 to-transparent blur-2xl"></div>
  </div>
</section>

<style>
  @keyframes twinkle {
    0%, 100% { opacity: 0.1; }
    50% { opacity: 0.3; }
  }

  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  .animate-twinkle {
    animation: twinkle 4s ease-in-out infinite;
  }

  .animate-float {
    animation: float 6s ease-in-out infinite;
  }
</style>